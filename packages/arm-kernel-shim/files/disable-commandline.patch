--- arm-kernel-shim/main.c~	2006-07-21 11:12:07.000000000 +0930
+++ arm-kernel-shim/main.c	2007-01-28 11:56:35.000000000 +1030
@@ -47,7 +47,9 @@
 
 #define NAKED		__attribute__((naked))
 
+#if defined (COMMANDLINE)
 const char __attribute__((section(".rodata"))) cmdline[] = COMMANDLINE;
+#endif
 
 void NAKED __attribute__((section(".boot"))) boot (u32 r0, u32 r1, u32 r2)
 {
@@ -82,6 +84,7 @@
   pv += H_SIZE(pv)*4;
 #endif
 
+#if defined (COMMANDLINE)
 	/* Command line */
   H_SIZE(pv)		= tag_size(tag_cmdline) + (sizeof (cmdline)+1+3)/4;
   H_TAG(pv)		= ATAG_CMDLINE;
@@ -91,6 +94,7 @@
       P_CMDLINE(pv)->cmdline[i] = cmdline[i];
   }
   pv += H_SIZE(pv)*4;
+#endif
 
 	/* End */
   H_SIZE(pv)		= 0;
