 arch/arm/mach-ixp4xx/Kconfig           |    8 ++++++++
 arch/arm/mach-ixp4xx/Makefile          |    1 +
 arch/arm/tools/mach-types              |    1 +
 include/asm-arm/arch-ixp4xx/hardware.h |    1 +
 include/asm-arm/arch-ixp4xx/irqs.h     |    9 +++++++++
 5 files changed, 20 insertions(+)

--- linux-2.6.14.orig/arch/arm/mach-ixp4xx/Kconfig	2005-11-09 00:58:58.000000000 +0100
+++ linux-2.6.14/arch/arm/mach-ixp4xx/Kconfig	2005-11-11 22:23:08.000000000 +0100
@@ -61,6 +61,14 @@ config ARCH_PRPMC1100
 	  PrPCM1100 Processor Mezanine Module. For more information on
 	  this platform, see <file:Documentation/arm/IXP4xx>.
 
+config MACH_NAS100D
+	bool
+	prompt "NAS100D"
+	help
+	  Say 'Y' here if you want your kernel to support Iomega's
+	  NAS 100d device. For more information on this platform,
+	  see http://www.nslu2-linux.org/wiki/NAS100d/HomePage
+
 #
 # Avila and IXDP share the same source for now. Will change in future
 #
--- linux-2.6.14.orig/arch/arm/mach-ixp4xx/Makefile	2005-11-09 00:58:58.000000000 +0100
+++ linux-2.6.14/arch/arm/mach-ixp4xx/Makefile	2005-11-11 22:23:08.000000000 +0100
@@ -8,4 +8,5 @@ obj-$(CONFIG_ARCH_IXDP4XX)	+= ixdp425-pc
 obj-$(CONFIG_MACH_IXDPG425)	+= ixdpg425-pci.o coyote-setup.o
 obj-$(CONFIG_ARCH_ADI_COYOTE)	+= coyote-pci.o coyote-setup.o
 obj-$(CONFIG_MACH_GTWX5715)	+= gtwx5715-pci.o gtwx5715-setup.o
+obj-$(CONFIG_MACH_NAS100D)	+= nas100d-pci.o nas100d-setup.o nas100d-power.o
 
--- linux-2.6.14.orig/include/asm-arm/arch-ixp4xx/hardware.h	2005-11-09 00:59:41.000000000 +0100
+++ linux-2.6.14/include/asm-arm/arch-ixp4xx/hardware.h	2005-11-11 22:23:08.000000000 +0100
@@ -44,5 +44,6 @@ extern unsigned int processor_id;
 #include "ixdp425.h"
 #include "coyote.h"
 #include "prpmc1100.h"
+#include "nas100d.h"
 
 #endif  /* _ASM_ARCH_HARDWARE_H */
--- linux-2.6.14.orig/include/asm-arm/arch-ixp4xx/irqs.h	2005-11-09 00:59:41.000000000 +0100
+++ linux-2.6.14/include/asm-arm/arch-ixp4xx/irqs.h	2005-11-11 23:01:50.000000000 +0100
@@ -93,4 +93,13 @@
 #define	IRQ_COYOTE_PCI_SLOT1	IRQ_IXP4XX_GPIO11
 #define	IRQ_COYOTE_IDE		IRQ_IXP4XX_GPIO5
 
+/*
+ * NAS100D board IRQs
+ */
+#define        IRQ_NAS100D_PCI_INTA      IRQ_IXP4XX_GPIO11
+#define        IRQ_NAS100D_PCI_INTB      IRQ_IXP4XX_GPIO10
+#define        IRQ_NAS100D_PCI_INTC      IRQ_IXP4XX_GPIO9
+#define        IRQ_NAS100D_PCI_INTD      IRQ_IXP4XX_GPIO8
+#define        IRQ_NAS100D_PCI_INTE      IRQ_IXP4XX_GPIO7
+
 #endif
--- linux-2.6.14.orig/arch/arm/tools/mach-types	2005-11-09 00:58:59.000000000 +0100
+++ linux-2.6.14/arch/arm/tools/mach-types	2005-11-11 22:23:08.000000000 +0100
@@ -869,3 +869,4 @@ davinci_dvdp		MACH_DAVINCI_DVDP	DAVINCI_
 htcuniversal		MACH_HTCUNIVERSAL	HTCUNIVERSAL		855
 tpad			MACH_TPAD		TPAD			856
 roverp3			MACH_ROVERP3		ROVERP3			857
+nas100d			MACH_NAS100D		NAS100D			865
