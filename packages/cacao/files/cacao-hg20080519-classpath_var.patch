Index: cacao/configure.ac
===================================================================
--- cacao.orig/configure.ac	2008-05-21 14:16:33.000000000 +0800
+++ cacao/configure.ac	2008-05-21 15:57:42.000000000 +0800
@@ -772,6 +772,7 @@
 
 AC_CHECK_WITH_JAVA_RUNTIME_LIBRARY_PREFIX
 AC_CHECK_WITH_JAVA_RUNTIME_LIBRARY_CLASSES
+AC_CHECK_WITH_TARGET_JAVA_RUNTIME_LIBRARY_CLASSES
 
 if test x"${ENABLE_JRE_LAYOUT}" = "xno"; then
    AC_CHECK_WITH_JAVA_RUNTIME_LIBRARY_LIBDIR
Index: cacao/m4/java-runtime-library.m4
===================================================================
--- cacao.orig/m4/java-runtime-library.m4	2008-05-21 14:16:34.000000000 +0800
+++ cacao/m4/java-runtime-library.m4	2008-05-21 16:18:23.000000000 +0800
@@ -106,6 +106,29 @@
 ])
 
 
+dnl where are Java runtime library classes installed on the target
+
+AC_DEFUN([AC_CHECK_WITH_TARGET_JAVA_RUNTIME_LIBRARY_CLASSES],[
+AC_MSG_CHECKING(where Java runtime library classes are installed on the target)
+AC_ARG_WITH([target-java-runtime-library-classes],
+            [AS_HELP_STRING(--with-target-java-runtime-library-classes=<path>,path to Java runtime library classes (includes the name of the file and may be flat) [[default=(gnuclasspath:${JAVA_RUNTIME_LIBRARY_PREFIX}/share/classpath/glibj.zip,openjdk:${JAVA_RUNTIME_LIBRARY_PREFIX}/control/build/${OS_DIR}-${JAVA_ARCH}/classes,*:${JAVA_RUNTIME_LIBRARY_PREFIX})]])],
+            [TARGET_JAVA_RUNTIME_LIBRARY_CLASSES=${withval}],
+            [case "${WITH_JAVA_RUNTIME_LIBRARY}" in
+                 gnuclasspath)
+                     TARGET_JAVA_RUNTIME_LIBRARY_CLASSES=${JAVA_RUNTIME_LIBRARY_PREFIX}/share/classpath/glibj.zip
+                     ;;
+                 openjdk)
+                     TARGET_JAVA_RUNTIME_LIBRARY_CLASSES=${JAVA_RUNTIME_LIBRARY_PREFIX}/control/build/${OS_DIR}-${JAVA_ARCH}/classes
+                     ;;
+                 *)
+                     TARGET_JAVA_RUNTIME_LIBRARY_CLASSES=${JAVA_RUNTIME_LIBRARY_PREFIX}
+                     ;;
+             esac])
+AC_MSG_RESULT(${TARGET_JAVA_RUNTIME_LIBRARY_CLASSES})
+AC_DEFINE_UNQUOTED([TARGET_JAVA_RUNTIME_LIBRARY_CLASSES], "${TARGET_JAVA_RUNTIME_LIBRARY_CLASSES}", [Java runtime library classes on the target])
+AC_SUBST(TARGET_JAVA_RUNTIME_LIBRARY_CLASSES)
+])
+
 dnl where are Java runtime library native libraries installed
 
 AC_DEFUN([AC_CHECK_WITH_JAVA_RUNTIME_LIBRARY_LIBDIR],[
Index: cacao/src/vm/properties.c
===================================================================
--- cacao.orig/src/vm/properties.c	2008-05-21 14:16:34.000000000 +0800
+++ cacao/src/vm/properties.c	2008-05-21 16:16:24.000000000 +0800
@@ -295,14 +295,14 @@
 		len =
 			strlen(CACAO_VM_ZIP) +
 			strlen(":") +
-			strlen(JAVA_RUNTIME_LIBRARY_CLASSES) +
+			strlen(TARGET_JAVA_RUNTIME_LIBRARY_CLASSES) +
 			strlen("0");
 
 		boot_class_path = MNEW(char, len);
 
 		strcpy(boot_class_path, CACAO_VM_ZIP);
 		strcat(boot_class_path, ":");
-		strcat(boot_class_path, JAVA_RUNTIME_LIBRARY_CLASSES);
+		strcat(boot_class_path, TARGET_JAVA_RUNTIME_LIBRARY_CLASSES);
 
 # elif defined(WITH_JAVA_RUNTIME_LIBRARY_OPENJDK)
 
