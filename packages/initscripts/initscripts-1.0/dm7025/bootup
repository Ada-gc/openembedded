echo 4 > /proc/progress
[ -e /dev/dbox/oled0 ] && ln -s /dev/dbox/oled0 /dev/dbox/lcd0

mount -t sysfs sysfs /sys
echo 12 > /proc/progress

depmod -Ae
echo 16 > /proc/progress

swapon -a
echo 18 > /proc/progress

for mod in cifs nfsd usb-storage sd autofs4 vfat; do
	modprobe $mod
done
echo 22 > /proc/progress

mount -at nonfs,nosmbfs,noncpfs,nocifs
echo 24 > /proc/progress

tar xzf /etc/var.tar.gz -C /
echo 28 > /proc/progress

# sleep after 10min
hdparm -S 120 /dev/discs/disc0/disc
echo 32 > /proc/progress
# set UDMA66
hdparm -X66 /dev/discs/disc0/disc
echo 34 > /proc/progress
# accustic management
hdparm -M 128 /dev/discs/disc0/disc

echo 44 > /proc/progress
for mod in xilleon dreambox_keyboard fp rt73 zd1211b rfmod; do
	modprobe $mod
done

echo 50 > /proc/progress
automount --ghost --timeout=1 /autofs file /etc/auto.hotplug

echo 54 > /proc/progress
[ -e /etc/dropbear/dropbear_rsa_host_key ] && /usr/bin/showiframe /boot/bootlogo.mvi || /usr/bin/showiframe /boot/bootlogo_wait.mvi

echo 62 > /proc/progress
hostname -F /etc/hostname

echo 66 > /proc/progress
/usr/bin/wdog /usr/bin/dccamd -

echo 70 > /proc/progress
ifup -a

echo 78 > /proc/progress
mount -at nfs,smbfs,cpfs,cifs

echo 82 > /proc/progress
[ -e "/etc/sysctl.conf" ] && /sbin/sysctl -p "/etc/sysctl.conf"

echo 86 > /proc/progress
ldconfig

echo 90 > /proc/progress

echo 94 > /proc/progress
