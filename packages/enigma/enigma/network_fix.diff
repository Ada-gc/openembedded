Index: include/lib/dvb/edvb.h
===================================================================
RCS file: /cvs/tuxbox/apps/tuxbox/enigma/include/lib/dvb/edvb.h,v
retrieving revision 1.37
diff -u -r1.37 edvb.h
--- a/include/lib/dvb/edvb.h	12 Jun 2005 19:55:44 -0000	1.37
+++ b/include/lib/dvb/edvb.h	12 Sep 2005 15:45:30 -0000
@@ -196,6 +196,7 @@
 //////////////////////////////Network Stuff////////////////////////////////////
 public:
 #ifndef DISABLE_NETWORK
+	void applyNetworkFix();
 	void configureNetwork();
 	void UDHCPC_DataAvail(eString);
 	void UDHCPC_Closed(int);
Index: lib/dvb/edvb.cpp
===================================================================
RCS file: /cvs/tuxbox/apps/tuxbox/enigma/lib/dvb/edvb.cpp,v
retrieving revision 1.104
diff -u -r1.104 edvb.cpp
--- a/lib/dvb/edvb.cpp	24 Aug 2005 19:07:40 -0000	1.104
+++ b/lib/dvb/edvb.cpp	12 Sep 2005 15:45:34 -0000
@@ -80,6 +80,7 @@
 {
 #ifndef DISABLE_NETWORK
 	CONNECT(delayTimer.timeout, eDVB::restartSamba);
+	applyNetworkFix();
 #ifndef DISABLE_NFS
 	CONNECT(delayTimer.timeout, eDVB::doMounts);
 #endif
@@ -773,6 +774,28 @@
 	}
 }
 
+void eDVB::applyNetworkFix()
+{
+	if ( eSystemInfo::getInstance()->getHwType() == eSystemInfo::DM7020 )
+	{
+		int networkfix=0;
+		eConfig::getInstance()->getKey("/elitedvb/network/fix", networkfix);
+		struct stat s;
+		if ( !stat("/proc/net/dream_mode", &s) )
+		{
+			FILE *f = fopen("/proc/net/dream_mode", "w");
+			if (f)
+			{
+				const char *tmp = networkfix ? "1" : "0";
+				fwrite(tmp, 2, 1, f);
+				fclose(f);
+			}
+			else
+				eDebug("couldn't open /proc/net/dream_mode");
+		}
+	}
+}
+
 void eDVB::configureNetwork()
 {
 #ifndef USE_IFUPDOWN
Index: src/setup_extra.h
===================================================================
RCS file: /cvs/tuxbox/apps/tuxbox/enigma/src/setup_extra.h,v
retrieving revision 1.12
diff -u -r1.12 setup_extra.h
--- a/src/setup_extra.h	1 Sep 2005 22:33:22 -0000	1.12
+++ b/src/setup_extra.h	12 Sep 2005 15:48:46 -0000
@@ -19,6 +19,7 @@
 #ifndef TUXTXT_CFG_STANDALONE
 	void tuxtxtCachingChanged(bool);
 #endif
+	void networkFixChanged(bool);
 	void colorbuttonsChanged(bool);
 	void reinitializeHTTPServer(bool);
 	void fastZappingChanged(bool b);
--- a/po/de.po	2006-01-10 21:14:35.000000000 +0100
+++ a/po/de.po	2006-01-10 21:45:19.000000000 +0100
@@ -4116,6 +4116,14 @@
 msgid "try to reconnect when an external cahandler connection was lost"
 msgstr ""
 
+#: src/setup_extra.cpp:126
+msgid "Enable network fix"
+msgstr "Netzwerk 'fix' aktivieren"
+
+#: src/setup_extra.cpp:126
+msgid "enable this when your network is very slow(for testing)"
+msgstr "anhaken, wenn das Netzwerk extrem langsam ist(zum testen)"
+
 #: src/setup_extra.cpp:127
 msgid "Enable file sharing"
 msgstr "Dateifreigaben aktivieren"
--- a/src/setup_extra.cpp	2006-01-10 21:14:49.000000000 +0100
+++ a/src/setup_extra.cpp	2006-01-11 12:10:27.000000000 +0100
@@ -122,8 +122,9 @@
 	new eListBoxEntryCheck( (eListBox<eListBoxEntry>*)&list, _("Auto bouquet change"), "/elitedvb/extra/autobouquetchange", _("change into next bouquet when end of current bouquet is reached"));
 	new eListBoxEntryCheck( (eListBox<eListBoxEntry>*)&list, _("Auto reconnect cahandler"), "/elitedvb/extra/cahandlerReconnect", _("try to reconnect when an external cahandler connection was lost"));
 #ifndef DISABLE_NETWORK
-	if ( eSystemInfo::getInstance()->getHwType() == eSystemInfo::DM7000 ||
-	    eSystemInfo::getInstance()->getHwType() == eSystemInfo::DM7020)
+	if ( eSystemInfo::getInstance()->getHwType() == eSystemInfo::DM7020 )
+		CONNECT((new eListBoxEntryCheck( (eListBox<eListBoxEntry>*)&list, _("Enable network fix"), "/elitedvb/network/fix", _("enable this when your network is very slow(for testing)")))->selected, eExpertSetup::networkFixChanged );
+	if ( eSystemInfo::getInstance()->getHwType() == eSystemInfo::DM7000 )
 		new eListBoxEntryCheck( (eListBox<eListBoxEntry>*)&list, _("Enable file sharing"), "/elitedvb/network/samba", _("start file sharing(samba) on startup"));
 #endif
 #ifndef TUXTXT_CFG_STANDALONE
@@ -251,6 +252,11 @@
 	eZap::getInstance()->reconfigureHTTPServer();
 }
 
+void eExpertSetup::networkFixChanged(bool b)
+{
+	eDVB::getInstance()->applyNetworkFix();
+}
+
 void eExpertSetup::fastZappingChanged(bool b)
 {
 	Decoder::setFastZap(b);
