
#
# Patch managed by http://www.holgerschurig.de/patcher.html
#

--- freeswan-2.06/lib/libdes/Makefile~flags
+++ freeswan-2.06/lib/libdes/Makefile
@@ -58,9 +58,10 @@
 #CC=gcc
 #CFLAG= -O4 -funroll-loops -fomit-frame-pointer
 # normally overridden by FreeS/WAN Makefiles anyway
-CFLAG= -O3 -fomit-frame-pointer -I${KLIPSD}/include -I${SRCDIR}
+CFLAG= -O3 -fomit-frame-pointer
 
-CFLAGS=$(OPTS) $(CFLAG)
+CFLAGS=$(CFLAG)
+override CFLAGS += $(OPTS) -I${KLIPSD}/include -I${SRCDIR}
 CPP=$(CC) -E
 
 # Assember version of des_encrypt*().
--- freeswan-2.06/lib/libfreeswan/Makefile~flags
+++ freeswan-2.06/lib/libfreeswan/Makefile
@@ -45,7 +45,7 @@
 
 LIB=libfreeswan.a
 # Original flags
-CFLAGS=-I. -I${SRCDIR} -I${KLIPSD} -I${FREESWANSRCDIR} $(USERCOMPILE)
+CFLAGS=$(USERCOMPILE)
 CFLAGS+= -Wall
 #CFLAGS+= -Wconversion
 #CFLAGS+= -Wmissing-prototypes
@@ -57,6 +57,7 @@
 #CFLAGS+= -W
 #CFLAGS+= -Wwrite-strings
 CFLAGS+= -Wbad-function-cast 
+override CFLAGS += -I. -I${SRCDIR} -I${KLIPSD} -I${FREESWANSRCDIR}
 
 
 
--- freeswan-2.06/lib/libipsecpolicy/Makefile~flags
+++ freeswan-2.06/lib/libipsecpolicy/Makefile
@@ -30,12 +30,13 @@
 
 LIB=libipsecpolicy.a
 # Original flags
-CFLAGS=-I. -I${KLIPSD} -I${FREESWANSRCDIR} $(USERCOMPILE)
+CFLAGS = $(USERCOMPILE)
 CFLAGS+= -Wall
 CFLAGS+= -Wpointer-arith
 CFLAGS+= -Wcast-qual
 CFLAGS+= -Wstrict-prototypes
 CFLAGS+= -Wbad-function-cast 
+override CFLAGS += -I. -I${KLIPSD} -I${FREESWANSRCDIR} $(USERCOMPILE)
 
 MANS=
 
--- freeswan-2.06/lib/liblwres/Makefile~flags
+++ freeswan-2.06/lib/liblwres/Makefile
@@ -24,7 +24,8 @@
 CDEFINES = -g
 CWARNINGS = -Werror
 
-CFLAGS=${CINCLUDES} ${CDEFINES} ${CWARNINGS}
+CFLAGS=${CDEFINES} ${CWARNINGS}
+override CFLAGS+=${CINCLUDES}
 
 VERSION="@(\#) freeswan-hacking-9.2.1-for-fs2"
 LIBINTERFACE=2
--- freeswan-2.06/programs/Makefile.program~flags
+++ freeswan-2.06/programs/Makefile.program
@@ -1,7 +1,7 @@
 
 include ${FREESWANSRCDIR}/Makefile.ver
 
-CFLAGS+=$(USERCOMPILE) -I${KLIPSINC}
+override CFLAGS+=-I${KLIPSINC}
 
 CFLAGS+= -Wall
 #CFLAGS+= -Wconversion
@@ -23,7 +23,7 @@
 CFLAGS+= ${WERROR}
 
 ifneq ($(LD_LIBRARY_PATH),)
-LDFLAGS=-L$(LD_LIBRARY_PATH)
+LDFLAGS+=-L$(LD_LIBRARY_PATH)
 endif
 
 MANDIR8=$(MANTREE)/man8
--- freeswan-2.06/programs/lwdnsq/Makefile~flags
+++ freeswan-2.06/programs/lwdnsq/Makefile
@@ -26,9 +26,9 @@
 LIBS:=${FREESWANLIB} ${LWRESLIB} 
 LIBS+=${BIND9STATICLIBDIR}/libdns.a ${BIND9STATICLIBDIR}/libisc.a
 LIBS+=${BIND9STATICLIBEXTRA}
-CFLAGS+=-I${LWRESINCL}
+override CFLAGS+=-I${LWRESINCL}
 ifneq (${BIND9INCDIR},/usr/local/include)
-CFLAGS+=-I${BIND9INCDIR}
+override CFLAGS+=-I${BIND9INCDIR}
 endif
 #USERCOMPILE=-g
 
--- freeswan-2.06/programs/pluto/Makefile~flags
+++ freeswan-2.06/programs/pluto/Makefile
@@ -108,7 +108,7 @@
 	-DGCC_LINT \
 	# -DLEAK_DETECTIVE
 
-CPPFLAGS = $(HDRDIRS) $(DEFINES) \
+override CPPFLAGS += $(HDRDIRS) $(DEFINES) \
 	-DSHARED_SECRETS_FILE=\"${FINALCONFDIR}/ipsec.secrets\" \
 	-DPOLICYGROUPSDIR=\"${FINALCONFDDIR}/policies\" \
 	-DPERPEERLOGDIR=\"${FINALLOGDIR}/pluto/peer\"
@@ -121,7 +121,7 @@
 LIBSPLUTO+= -lgmp -lresolv # -lefence
 
 ifneq ($(LD_LIBRARY_PATH),)
-LDFLAGS=-L$(LD_LIBRARY_PATH)
+LDFLAGS+=-L$(LD_LIBRARY_PATH)
 endif
 
 LIBSADNS = $(FREESWANLIB)
--- freeswan-2.06/testing/utils/ikeping/Makefile~flags
+++ freeswan-2.06/testing/utils/ikeping/Makefile
@@ -35,7 +35,7 @@
 
 HDRDIRS =  $(FREESWANINCLS)
 
-CPPFLAGS = $(HDRDIRS) $(BYTE_ORDER) -DDEBUG 
+override CPPFLAGS += $(HDRDIRS) $(BYTE_ORDER) -DDEBUG 
 
 ALLFLAGS = $(CPPFLAGS) $(CFLAGS)
 
--- freeswan-2.06/testing/utils/uml_netjig/Makefile~flags
+++ freeswan-2.06/testing/utils/uml_netjig/Makefile
@@ -43,7 +43,8 @@
 #PCAPH=-I/home/mcr/src/libpcap
 #PCAPLIB=-L/home/mcr/src/linux/i386/libpcap -lpcap
 
-CFLAGS = -g -Wall ${PCAPH} ${NETDISSECTH} ${OPTIONS}
+CFLAGS = -g -Wall
+override CFLAGS += ${PCAPH} ${NETDISSECTH} ${OPTIONS}
 LIBS = ${NETDISSECTLIB} ${PCAPLIB} ${OPENSSL}
 
 
