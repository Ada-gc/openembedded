---
 Makefile.am           |   10 +++++-----
 configure.ac          |    1 +
 testsuite/Makefile.am |    2 +-
 3 files changed, 7 insertions(+), 6 deletions(-)

--- argp-standalone-1.3.orig/configure.ac
+++ argp-standalone-1.3/configure.ac
@@ -21,6 +21,7 @@ AC_PROG_CC
 AC_PROG_MAKE_SET
 AC_PROG_RANLIB
 AM_PROG_CC_STDC
+AC_PROG_LIBTOOL

 if test "x$am_cv_prog_cc_stdc" = xno ; then
   AC_ERROR([the C compiler doesn't handle ANSI-C])
--- argp-standalone-1.3.orig/Makefile.am
+++ argp-standalone-1.3/Makefile.am
@@ -21,9 +21,9 @@
 AUTOMAKE_OPTIONS = foreign
 SUBDIRS = . testsuite

-LIBOBJS = @LIBOBJS@
+LTLIBOBJS = @LTLIBOBJS@

-lib_LIBRARIES = libargp.a
+lib_LTLIBRARIES = libargp.la

 # argp-test needs random(), which is not available on windows.
 EXTRA_PROGRAMS = argp-test
@@ -33,11 +33,11 @@ include_HEADERS=argp.h
 EXTRA_DIST = mempcpy.c strchrnul.c strndup.c strcasecmp.c vsnprintf.c Versions

 # Leaves out argp-fs-xinl.c and argp-xinl.c
-libargp_a_SOURCES = argp-ba.c argp-eexst.c argp-fmtstream.c \
+libargp_la_SOURCES = argp-ba.c argp-eexst.c argp-fmtstream.c \
		    argp-help.c argp-parse.c argp-pv.c \
		    argp-pvh.c

-libargp_a_LIBADD = $(LIBOBJS)
+libargp_la_LIBADD = $(LTLIBOBJS)

-argp_test_LDADD = libargp.a
+argp_test_LDADD = libargp.la

--- argp-standalone-1.3.orig/testsuite/Makefile.am
+++ argp-standalone-1.3/testsuite/Makefile.am
@@ -7,7 +7,7 @@ TS_SH = ex1-test permute-test

 TS_ALL = $(TS_PROGS) $(TS_SH)

-LDADD = ../libargp.a
+LDADD = $(top_builddir)/libargp.la

 EXTRA_DIST = $(TS_SH) run-tests
 CLEANFILES = test.out
