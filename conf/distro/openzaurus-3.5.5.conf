#
# This is config for last version of OpenZaurus distribution.
# We (Hrw & XorA) decided to release 3.5.5 from .dev tree because .oz354x
# is just too old so with such small devteam we are unable to backport all
# needed fixes.
#
# This config need some love. It was created from current OpenZaurus config,
# Ångström config and UmbaUmba 17.3 config.

DISTRO_VERSION = "3.5.5-test0"

TEST1 := "$bb.fatal('this config need love')"

require conf/distro/include/openzaurus.inc
require conf/distro/include/sane-srcdates.inc

#
# Base
#
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}gcc-initial:gcc-cross-initial"
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}gcc:gcc-cross"
PREFERRED_PROVIDERS += " virtual/${TARGET_PREFIX}g++:gcc-cross"

PREFERRED_VERSION_binutils-cross-sdk = "2.16"
PREFERRED_VERSION_binutils-cross = "2.16"
PREFERRED_VERSION_binutils = "2.16"

PREFERRED_VERSION_glibc = "2.3.5+cvs20050627"
PREFERRED_VERSION_gcc = "3.4.4"
PREFERRED_VERSION_gcc-cross = "3.4.4"
PREFERRED_VERSION_gcc-cross-sdk = "3.4.4"
PREFERRED_VERSION_gcc-cross-initial = "3.4.4"

# Glibc provides iconv and intl -- adjust, when doing uclibc builds
PREFERRED_PROVIDER_virtual/libiconv = "glibc"
PREFERRED_PROVIDER_virtual/libintl = "glibc"

#
# Feeds
#
# avoid "/" on end to avoid #1102
FEED_BASE_URI = "http://feeds.openzaurus.org/3.5.5"

FEED_URIS ?= " \
        upgrades##${FEED_BASE_URI}/feed/upgrades \
machine-upgrades##${FEED_BASE_URI}/feed/upgrades/machine/${MACHINE} \
         machine##${FEED_BASE_URI}/feed/machine/${MACHINE} \
            perl##${FEED_BASE_URI}/feed/perl \
          python##${FEED_BASE_URI}/feed/python \
            base##${FEED_BASE_URI}/feed/base "

ENABLE_BINARY_LOCALE_GENERATION = "1"

#
# All machines will get 2.6 kernel (except collie of course)
#
MACHINE_KERNEL_VERSION = "2.6" 
MACHINE_KERNEL_VERSION_collie = "2.4" 

#
# We use 2.6.20 kernel
#
PREFERRED_VERSION_linux-rp = "2.6.20"

#
# Toshiba USB Host driver is not updated so tosa == 2.6.17
#
PREFERRED_VERSION_linux-rp_tosa = "2.6.17"


PREFERRED_VERSION_altboot = "1.0.8"

# GPE
require conf/distro/include/preferred-gpe-versions-2.8.inc

PREFERRED_PROVIDER_dbus-glib         = "dbus-glib"
PREFERRED_PROVIDER_virtual/libsdl   ?= "libsdl-x11"
PREFERRED_PROVIDER_virtual/libxine  ?= "libxine-x11"
PREFERRED_PROVIDER_esound           ?= "pulseaudio"


PREFERRED_VERSION_fontconfig        = "2.4.1"
PREFERRED_VERSION_freetype          = "2.2.1"
PREFERRED_VERSION_freetype-native   = "2.2.1"
#fix screen corruption issues
PREFERRED_VERSION_cairo = "1.3.12"

PREFERRED_PROVIDER_virtual/xserver = "xserver-kdrive"
PREFERRED_PROVIDER_xserver         = "xserver-kdrive"

require conf/distro/include/preferred-xorg-versions-X11R7.1.inc

PREFERRED_VERSION_xserver-kdrive = "X11R7.1-1.1.0"

#
# 2.6.10 was used in previous release so will be compatible
#
PREFERRED_VERSION_gtk+ = "2.6.10"

#zap extra stuff taking place in $MACHINE.conf 
GPE_EXTRA_INSTALL = ""

# Virtuals:
PREFERRED_PROVIDER_virtual/db ?= "db"
PREFERRED_PROVIDER_virtual/db-native ?= "db-native"

TEST2 := "$bb.fatal('this config need love')"

# Others:
PREFERRED_PROVIDER_virtual/libx11 ?= "diet-x11"
PREFERRED_PROVIDER_gconf ?= "gconf-dbus"
PREFERRED_PROVIDER_gnome-vfs ?= "gnome-vfs"
PREFERRED_PROVIDER_gnome-vfs-plugin-file ?= "gnome-vfs"
PREFERRED_PROVIDER_tslib ?= "tslib"
PREFERRED_PROVIDER_tslib-conf ?= "tslib"
PREFERRED_PROVIDER_libgpewidget ?= "libgpewidget"
TEST4 := "$bb.fatal('this config need love')"
PREFERRED_PROVIDER_ntp = "ntp"
PREFERRED_PROVIDER_hotplug = "udev"
PREFERRED_PROVIDER_libxss = "libxss"

#
# busybox 1.2.1 was known as working - feel free to update
#
PREFERRED_VERSION_busybox = "1.2.1"

#
# Die pcmcia-cs, DIE!
#
PCMCIA_MANAGER = "pcmciautils"

PREFERRED_VERSION_dbus ?= "1.0.2"
PREFERRED_VERSION_dbus-glib ?= "0.71"

PREFERRED_VERSION_gstreamer ?= "0.10.11"

PREFERRED_PROVIDER_hostap-conf ?= "hostap-conf"

PREFERRED_VERSION_wpa-supplicant = "0.5.7"
PREFERRED_VERSION_hostap-utils ?= "0.4.7"
PREFERRED_VERSION_hostap-modules ?= "0.4.7"

#
# We do not use qte-mt to keep compatibility with older OZ
#
PALMTOP_USE_MULTITHREADED_QT = "no"
OPIE_VERSION = "1.2.2"

require conf/distro/include/preferred-opie-versions.inc
TEST3 := "$bb.fatal('this config need love')"
