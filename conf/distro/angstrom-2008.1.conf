#@--------------------------------------------------------------------
#@TYPE: Distribution
#@NAME: Angstrom <http://www.angstrom-distribution.org>
#@DESCRIPTION: The Linux Distribution for Kernel 2.6 based devices
#@MAINTAINER: Koen Kooi <koen@dominion.kabel.utwente.nl>
#@MAINTAINER: Michael 'Mickey' Lauer <mickey@Vanille-media.de>
#@--------------------------------------------------------------------


# Use Xorg R7.3 release
require conf/distro/include/preferred-xorg-versions-X11R7.3.inc


# This is a testbed for unstable and/or untested things, while angstrom-2007.1 
# is aiming for stability and a release.
# Use this at your own risk, we welcome bugreports filed at 
#    http://bugs.openembedded.org
# In doubt, use DISTRO="angstrom-2007.1"

#Preferred version for the kernel on various machines
PREFERRED_VERSION_linux-handhelds-2.6 ?= "2.6.21-hh16"

require conf/distro/angstrom-2007.1.conf

#DISTRO_VERSION = "2008.1"
DISTRO_VERSION = "2008.1-test-${DATE}"
DISTRO_REVISION = "1"

require conf/distro/include/sane-srcdates.inc
require conf/distro/include/sane-srcrevs.inc

#Images built can have to modes:
# 'debug': empty rootpassword, strace and gdb included
# 'release' no root password, no strace and gdb by default
DISTRO_TYPE ?= "debug"
#DISTRO_TYPE = "release"

# Ship just basic locale by default. Locales are big (~1Mb uncompr.), so
# shipping some adhoc subset will be still useless and size burden for
# users of all other languages/countries. Instead, worth to make it easy
# to install additional languages: installer/wizard + metapackages which
# will RRECOMMEND as much as possible content for a given language
# (locales, UI transalations, help, etc. - useless for pros, but really 
# helpful for common users).
# Also, it appears that no locales fit in 16Mb for now. "C" locale rules!
IMAGE_LINGUAS = '${@base_less_or_equal("ROOT_FLASH_SIZE", "16", "", "en-gb", d)}'

FEED_URIS += " \
		no-arch##${ANGSTROM_URI}/unstable/feed/all \
		base##${ANGSTROM_URI}/unstable/feed/${FEED_ARCH}/base \
		perl##${ANGSTROM_URI}/unstable/feed/${FEED_ARCH}/perl \
		python##${ANGSTROM_URI}/unstable/feed/${FEED_ARCH}/python \
		debug##${ANGSTROM_URI}/unstable/feed/${FEED_ARCH}/debug \
		gstreamer##${ANGSTROM_URI}/unstable/feed/${FEED_ARCH}/gstreamer \
		${MACHINE}##${ANGSTROM_URI}/unstable/feed/${FEED_ARCH}/machine/${MACHINE}"

#The angstrom-mirrors.bbclass should have everything, but we can use this as a fallback
CVS_TARBALL_STASH ?= "\
		     http://www.angstrom-distribution.org/unstable/sources/ \
		     http://ewi546.ewi.utwente.nl/mirror/www.openzaurus.org/official/unstable/3.5.4/sources/ \
		    "


#Make sure we use 2.6 on machines with a 2.4/2.6 selector
KERNEL = "kernel26"
MACHINE_KERNEL_VERSION = "2.6"
PCMCIA_MANAGER = "pcmciautils"

#Preferred version for the kernel on various machines
PREFERRED_VERSION_linux-handhelds-2.6 ?= "2.6.21-hh17"

PREFERRED_VERSION_gcc                   = "4.2.1"
PREFERRED_VERSION_gcc-cross             = "4.2.1"
PREFERRED_VERSION_gcc-cross-initial    	= "4.1.2"

#This is unrelated to the kernel version, but userspace apps (e.g. HAL) require a recent version to build against
PREFERRED_VERSION_linux-libc-headers 	= "2.6.22"

#Prefer glibc 2.6 and uclibc 0.9.29, these have had the most testing.
PREFERRED_VERSION_glibc 		= "2.6.1"
PREFERRED_VERSION_glibc-intermediate 	= "2.6.1"
PREFERRED_VERSION_glibc-initial 	= "2.6.1"

#Prefer a newer GTK+ and friends
PREFERRED_VERSION_gtk+             	= "2.12.0"
PREFERRED_VERSION_glib-2.0              = "2.14.0"
PREFERRED_VERSION_pango                 = "1.18.1"

# prefer newest for speed and fun
PREFERRED_VERSION_udev			= "115"

# Our patched-to-hell busybox 1.2.1 is getting old and unmaintanable
PREFERRED_VERSION_busybox               = "1.7.2" 


#avr32 only has patches for binutils 2.17 and gcc 4.1.2 in OE
PREFERRED_VERSION_binutils_avr32 = "2.17"
PREFERRED_VERSION_binutils-cross_avr32 = "2.17"
PREFERRED_VERSION_binutils-cross-sdk_avr32 = "2.17"
#there's is no avr32 patch for 0.9.29
PREFERRED_VERSION_uclibc_avr32 = "0.9.28"
PREFERRED_VERSION_uclibc-initial_avr32 = "0.9.28"

