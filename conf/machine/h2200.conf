#@TYPE: Machine
#@NAME: HP iPAQ h22xx
#@DESCRIPTION: Machine configuration for the HP iPAQ h22xx


TARGET_ARCH = "arm"
IPKG_ARCHS = "all arm armv4 armv4t armv5e armv5te ipaqpxa h2200"

PREFERRED_PROVIDER_xserver = "xserver-kdrive"
PREFERRED_PROVIDER_virtual/kernel = "handhelds-pxa-2.6"

EXTRA_IMAGECMD_h2200_jffs2 = "--pad --no-cleanmarkers --pagesize=512 --eraseblock=16384"

ROOT_FLASH_SIZE = "32"

BOOTSTRAP_EXTRA_DEPENDS_append = " handhelds-pxa-2.6 udev module-init-tools"

BOOTSTRAP_EXTRA_RDEPENDS = "kernel ipaq-boot-params ${@linux_module_packages('${H2200_MODULES}', d)}"
BOOTSTRAP_EXTRA_RDEPENDS_append = " udev module-init-tools"

H2200_MODULES = "g_ether g_serial g_file_storage sa1100-rtc pm pcmcia-core snd-pxa-i2sound-h2200 pxa2xx_h2200 h2200_pm h2200_lcd h2200_kbd h2200_battery mq11xx_base mq1100fb samcop_adcts w1_ds2760 w1_samcop "
# pxa2xx_udc is built in to the kernel

SERIAL_CONSOLE = "115200 tts/0 vt100"

USE_VT = "0"

include conf/machine/ipaq-common.conf
include conf/machine/handheld-common.conf

GUI_MACHINE_CLASS = "smallscreen"

# not using tune-xscale so as to retain backwards compatibility
include conf/machine/tune-xscale.conf
