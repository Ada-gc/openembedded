#@TYPE: Machine
#@Name: Compulab PXA270 system
#@DESCRIPTION: Machine configuration for Compulab PXA270 system
#OLDEST_KERNEL = "2.6.16"
TARGET_ARCH = "arm"
PREFERRED_VERSION_compulab-pxa270 = "2.6.22"
GUI_MACHINE_CLASS ?= "bigscreen"

PREFERRED_PROVIDER_virtual/kernel = "${MACHINE}"
PACKAGE_EXTRA_ARCHS = "armv4 armv5te"

require conf/machine/include/tune-xscale.conf

# used by sysvinit_2
SERIAL_CONSOLE ?= "38400 ttySA0"

# used by opie-collections.inc
ROOT_FLASH_SIZE ?= "32"

# for NAND flash.
EXTRA_IMAGECMD_jffs2 = "--little-endian --eraseblock=0x20000 --pad=0x20000 --no-cleanmarkers;\
	sumtool -i ${DEPLOY_DIR_IMAGE}/${IMAGE_NAME}.rootfs.jffs2 \
	-o ${DEPLOY_DIR_IMAGE}/${IMAGE_NAME}.rootfs-summary.jffs2 \
	-e 0x20000 -p; \
	cd ${DEPLOY_DIR_IMAGE}; \
	rm -f ${DEPLOY_DIR_IMAGE}/${IMAGE_LINK_NAME}.rootfs-summary.jffs2; \
	ln -s ${IMAGE_NAME}.rootfs-summary.jffs2 ${IMAGE_LINK_NAME}.rootfs-summary.jffs2 \
	"

MACHINE_FEATURES = "kernel26 pcmcia usbhost usbgadget pcmcia touchscreen alsa"

